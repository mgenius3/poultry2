(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{5511:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/register",function(){return r(72)}])},72:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return w}});var a=r(7568),n=r(1799),t=r(9396),i=r(4051),o=r.n(i),l=r(5893),d=r(1664),c=r.n(d),m=r(7294),u=r(7536),x=r(8333),p=r(2920),h=(r(993),r(1163)),b=r(2418),f=r.n(b);function w(){var e=(0,m.useState)(!1),s=e[0],r=e[1],i=(0,h.useRouter)(),d=(0,u.cI)(),b=d.handleSubmit,w=d.register,g=d.formState.errors,j=function(){var e=(0,a.Z)(o().mark((function e(s){var a,n,t,l,d,c,m,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.name,n=s.email,t=s.password,l=s.cpassword,r(!0),t===l){e.next=6;break}p.Am.error("confirm password must be same with password"),r(!1),e.next=36;break;case 6:if(a&&n&&t&&l){e.next=10;break}p.Am.error("Please fill all the field above"),r(!1),e.next=36;break;case 10:return d=f().hashSync(t),e.prev=11,e.next=14,fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,email:n,password:d})});case 14:if(201!==(c=e.sent).status){e.next=25;break}return e.next=18,c.json();case 18:m=e.sent,sessionStorage.clear(),sessionStorage.setItem("user",JSON.stringify(m)),p.Am.success("User registered successfully"),i.push("/"),e.next=30;break;case 25:return r(!1),e.next=28,c.json();case 28:u=e.sent.message,p.Am.error(u);case 30:e.next=36;break;case 32:e.prev=32,e.t0=e.catch(11),r(!1),p.Am.error(e.t0);case 36:case"end":return e.stop()}}),e,null,[[11,32]])})));return function(s){return e.apply(this,arguments)}}();return(0,l.jsx)(m.Fragment,{children:(0,l.jsx)(x.Z,{title:"Register",children:(0,l.jsx)(m.Fragment,{children:(0,l.jsx)("form",{onSubmit:b(j),children:(0,l.jsx)("section",{className:"bg-[#F4F7FF] py-20 lg:py-[120px]",children:(0,l.jsx)("div",{className:"container mx-auto",children:(0,l.jsx)("div",{className:"-mx-4 flex flex-wrap",children:(0,l.jsx)("div",{className:"w-full px-4",children:(0,l.jsxs)("div",{className:"relative mx-auto max-w-[525px] overflow-hidden rounded-lg bg-white py-16 px-10 text-center sm:px-12 md:px-[60px]",children:[(0,l.jsx)("div",{className:"mb-10 text-center md:mb-16",children:(0,l.jsxs)("a",{className:"flex items-center tracking-wide no-underline hover:no-underline font-bold text-green-900 text-xl mx-auto inline-block max-w-[160px]",href:"#",children:[(0,l.jsx)("img",{src:"https://img.icons8.com/ios-filled/50/null/chicken.png",width:30}),(0,l.jsx)("b",{children:" Riere Farm"})]})}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("input",(0,t.Z)((0,n.Z)({type:"text",name:"name"},w("name",{required:"Please enter username",maxLength:{value:10,message:"username should not be more than 10 letters"}})),{placeholder:"user name",id:"name",className:"bordder-[#E9EDF4] w-full rounded-md border bg-[#FCFDFE] py-3 px-5 text-base text-body-color placeholder-[#ACB6BE] outline-none focus:border-primary focus-visible:shadow-none",autoFocus:!0})),g.name&&(0,l.jsx)("div",{className:"text-red-500",children:g.name.message})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("input",(0,t.Z)((0,n.Z)({type:"email",name:"email"},w("email",{required:"Please enter email",pattern:{value:/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$/i,message:"Please enter valid email"}})),{placeholder:"Email",id:"email",className:"bordder-[#E9EDF4] w-full rounded-md border bg-[#FCFDFE] py-3 px-5 text-base text-body-color placeholder-[#ACB6BE] outline-none focus:border-primary focus-visible:shadow-none",autoFocus:!0})),g.email&&(0,l.jsx)("div",{className:"text-red-500",children:g.email.message})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("input",(0,t.Z)((0,n.Z)({type:"password",name:"password"},w("password",{required:"Please enter password",minLength:{value:6,message:"password is more than 5 chars"}})),{placeholder:"Password",className:"bordder-[#E9EDF4] w-full rounded-md border bg-[#FCFDFE] py-3 px-5 text-base text-body-color placeholder-[#ACB6BE] outline-none focus:border-primary focus-visible:shadow-none"})),g.password&&(0,l.jsx)("div",{className:"text-red-500 ",children:g.password.message})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("input",(0,t.Z)((0,n.Z)({type:"password",name:"cpassword"},w("cpassword",{required:"Please confirm password"})),{placeholder:"confirm password",className:"bordder-[#E9EDF4] w-full rounded-md border bg-[#FCFDFE] py-3 px-5 text-base text-body-color placeholder-[#ACB6BE] outline-none focus:border-primary focus-visible:shadow-none"})),g.cpassword&&(0,l.jsx)("div",{className:"text-red-500 ",children:g.cpassword.message})]}),(0,l.jsx)("div",{className:"mb-10",children:s?(0,l.jsx)("button",{className:"primary-button text-lg",type:"submit",disabled:!0,children:(0,l.jsx)("b",{children:"processing..."})}):(0,l.jsx)("button",{className:"primary-button text-lg",type:"submit",children:(0,l.jsx)("b",{children:"Register"})})}),(0,l.jsxs)("p",{className:"text-base text-[#adadad]",children:["Already a member - \xa0",(0,l.jsx)(c(),{href:"/login",children:"Login"})]})]})})})})})})})})})}}},function(e){e.O(0,[714,238,126,977,108,333,774,888,179],(function(){return s=5511,e(e.s=s);var s}));var s=e.O();_N_E=s}]);