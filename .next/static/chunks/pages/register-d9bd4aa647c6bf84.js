(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{5511:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/register",function(){return r(72)}])},72:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return g}});var a=r(7568),n=r(1799),t=r(9396),i=r(4051),d=r.n(i),l=r(5893),o=r(1664),c=r.n(o),m=r(7294),u=r(3299),x=r(7536),p=r(8333),h=r(2920),b=(r(993),r(1163)),f=r(2418),w=r.n(f);function g(){var e=(0,u.useSession)().data,s=(0,m.useState)(!1),r=s[0],i=s[1],o=(0,b.useRouter)(),f=o.query.redirect;(0,m.useEffect)((function(){(null===e||void 0===e?void 0:e.user)&&o.push(f||"/")}),[o,e,f]);var g=(0,x.cI)(),v=g.handleSubmit,j=g.register,y=g.formState.errors,N=function(){var e=(0,a.Z)(d().mark((function e(s){var r,a,n,t,l,c,m;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.name,a=s.email,n=s.password,t=s.cpassword,i(!0),n===t){e.next=6;break}h.Am.error("confirm password must be same with password"),i(!1),e.next=34;break;case 6:if(r&&a&&n&&t){e.next=10;break}h.Am.error("Please fill all the field above"),i(!1),e.next=34;break;case 10:return l=w().hashSync(n),e.prev=11,e.next=14,fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r,email:a,password:l})});case 14:if(201!==(c=e.sent).status){e.next=23;break}return i(!1),e.next=19,(0,u.signIn)("credentials",{redirect:!1,email:a,password:n});case 19:h.Am.success("User registered successfully"),o.push("/"),e.next=28;break;case 23:return i(!1),e.next=26,c.json();case 26:m=e.sent.message,h.Am.error(m);case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(11),i(!1),h.Am.error(e.t0);case 34:case"end":return e.stop()}}),e,null,[[11,30]])})));return function(s){return e.apply(this,arguments)}}();return(0,l.jsx)(m.Fragment,{children:(0,l.jsx)(p.Z,{title:"Register",children:(0,l.jsx)(m.Fragment,{children:(0,l.jsx)("form",{onSubmit:v(N),children:(0,l.jsx)("section",{className:"bg-[#F4F7FF] py-20 lg:py-[120px]",children:(0,l.jsx)("div",{className:"container mx-auto",children:(0,l.jsx)("div",{className:"-mx-4 flex flex-wrap",children:(0,l.jsx)("div",{className:"w-full px-4",children:(0,l.jsxs)("div",{className:"relative mx-auto max-w-[525px] overflow-hidden rounded-lg bg-white py-16 px-10 text-center sm:px-12 md:px-[60px]",children:[(0,l.jsx)("div",{className:"mb-10 text-center md:mb-16",children:(0,l.jsxs)("a",{className:"flex items-center tracking-wide no-underline hover:no-underline font-bold text-green-900 text-xl mx-auto inline-block max-w-[160px]",href:"#",children:[(0,l.jsx)("img",{src:"https://img.icons8.com/ios-filled/50/null/chicken.png",width:30}),(0,l.jsx)("b",{children:" Riere Farm"})]})}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("input",(0,t.Z)((0,n.Z)({type:"text",name:"name"},j("name",{required:"Please enter username",maxLength:{value:10,message:"username should not more than 8 letters"}})),{placeholder:"user name",id:"name",className:"bordder-[#E9EDF4] w-full rounded-md border bg-[#FCFDFE] py-3 px-5 text-base text-body-color placeholder-[#ACB6BE] outline-none focus:border-primary focus-visible:shadow-none",autoFocus:!0})),y.name&&(0,l.jsx)("div",{className:"text-red-500",children:y.name.message})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("input",(0,t.Z)((0,n.Z)({type:"email",name:"email"},j("email",{required:"Please enter email",pattern:{value:/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$/i,message:"Please enter valid email"}})),{placeholder:"Email",id:"email",className:"bordder-[#E9EDF4] w-full rounded-md border bg-[#FCFDFE] py-3 px-5 text-base text-body-color placeholder-[#ACB6BE] outline-none focus:border-primary focus-visible:shadow-none",autoFocus:!0})),y.email&&(0,l.jsx)("div",{className:"text-red-500",children:y.email.message})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("input",(0,t.Z)((0,n.Z)({type:"password",name:"password"},j("password",{required:"Please enter password",minLength:{value:6,message:"password is more than 5 chars"}})),{placeholder:"Password",className:"bordder-[#E9EDF4] w-full rounded-md border bg-[#FCFDFE] py-3 px-5 text-base text-body-color placeholder-[#ACB6BE] outline-none focus:border-primary focus-visible:shadow-none"})),y.password&&(0,l.jsx)("div",{className:"text-red-500 ",children:y.password.message})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("input",(0,t.Z)((0,n.Z)({type:"password",name:"cpassword"},j("cpassword",{required:"Please confirm password"})),{placeholder:"confirm password",className:"bordder-[#E9EDF4] w-full rounded-md border bg-[#FCFDFE] py-3 px-5 text-base text-body-color placeholder-[#ACB6BE] outline-none focus:border-primary focus-visible:shadow-none"})),y.cpassword&&(0,l.jsx)("div",{className:"text-red-500 ",children:y.cpassword.message})]}),(0,l.jsx)("div",{className:"mb-10",children:r?(0,l.jsx)("button",{className:"primary-button text-lg",type:"submit",disabled:!0,children:(0,l.jsx)("b",{children:"processing..."})}):(0,l.jsx)("button",{className:"primary-button text-lg",type:"submit",children:(0,l.jsx)("b",{children:"Register"})})}),(0,l.jsxs)("p",{className:"text-base text-[#adadad]",children:["Already a member - \xa0",(0,l.jsx)(c(),{href:"/login",children:"Login"})]})]})})})})})})})})})}}},function(e){e.O(0,[714,238,126,977,108,333,774,888,179],(function(){return s=5511,e(e.s=s);var s}));var s=e.O();_N_E=s}]);